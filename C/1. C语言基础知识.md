##### Unix, Linux, Windows, Java, C++, C# 底层都是靠C实现的

##### 编译：编译器就是运用程序。 编译器将c文件变成机器语言二进制文件

##### C语言文件后缀名必须以.c 结尾，C++必须以.cpp结尾

### 编译

##### 1. 使用 gcc: GNU Compiler Collection，GNU 编译器套件 

##### 2. 查看gcc版本

```C
gcc -v
```

##### 编译格式

```C
gcc [-option1] ... <filename>
g++ [-option1] ... <filename>
```

> 命令、选项和源文件之间使用空格分隔
>
> 一行命令中可以有零个、一个或多个选项
>
> 文件名可以包含文件的绝对路径，也可以使用相对路径
>
> 如果命令中不包含输出可执行文件的文件名，可执行文件的文件名会自动生成一个默认名，Linux平台为a.out，Windows平台为a.exe

| **选项** | **含义**                   |
| -------- | -------------------------- |
| -o file  | 指定生成的输出文件名为file |
| -E       | 只进行预处理               |
| -S(大写) | 只进行预处理和编译         |
| -c(小写) | 只进行预处理、编译和汇编   |

```C
预处理：gcc -E hello.c -o hello.i

编 译：gcc -S hello.i -o hello.s

汇 编：gcc -c hello.s -o hello.o

链 接：gcc  hello.o -o hello
```

| **文件后缀** | **含义**              |
| ------------ | --------------------- |
| .c           | C 语言文件            |
| .i           | 预处理后的 C 语言文件 |
| .s           | 编译后的汇编文件      |
| .o           | 编译后的目标文件      |

##### 编译：一步完成编译（还是经过：预处理、编译、汇编、链接的过程）：

```c
gcc main.c -o main	
```

### 分步骤编译 + 编译过程

##### C语言编译可以分为4步骤

* ##### 预处理：宏定义展开、头文件展开、条件编译等，同时将代码中的注释删除，这里并不会检查语法

* ##### 编译：检查语法，将预处理后文件编译生成汇编文件

* ##### 汇编：将汇编文件生成目标文件(二进制文件)

* ##### 链接：C语言写的程序是需要依赖各种库的，所以编译之后还需要把库链接到最终的可执行程序中去

<img src=".\Pictures\0\2.png" style="zoom:50%;" />

### 预处理

```C
gcc -E main.c -o main.i
```

1. ##### 以i为后缀生成的是预处理后的文件

2. ##### 头文件展开 ：#include

   * ##### #号开头的就是预处理指令，在预处理的时候就会处理带井号的指令

   * ##### include：包含一个头文件，当预处理的时候，它会将这个头文件里面所有的完整函数拷贝到i文件中。这些头文件主要放对一些函数的声明

   * ##### include 只要是文件都能拷贝过来，包括.h   .c文件都可以拷贝过来的

   * ##### 只要带#号的，预处理的时候都会处理

3. ##### 消除注释 //    /* */：

   * ##### 在预处理的时候，所有的注释都被消除了

   * ##### 消除单行注释//   多行注释   /*   */

4. ##### 宏替换

   * ##### 宏的定义也是#开头，也是预处理指令，也表示预处理的时候被执行

   * ##### #define 表示定义一个宏. 宏其实意思就是等价---   预处理的时候会把宏替换成后面的东西

     ```C
     #define Pi 3.14
     printf("%d",Pi)
         
     预处理后
     printf("%d",3.14)
     ```

5. ##### 预处理不会检查语病

6. ##### 条件编译

   ```C
   int main(){
       #if 0   // 0语言中0表示不成立，非零表示成立
       printf("123",PI)---- 这句话不会被编译，但是这三行的空会给你留下来
       #endif
   }
   ```

   ```C
   int main(){
       #if 1   
       printf("123",PI)---- 这句话会被编译
       #endif
   }
   ```

   ```C
   int main(){
       #if abc
       printf("123",PI)---- 这句话不会被编译，但是这三行的空会给你留下来
       #endif
   }
   不编译，说明这个条件不存在，编译，则说明这个条件存在
   一般来说，是不编译的，比如之前定义过一个WIN64的宏，如果#if WIN64这个printf就会被编译         
   若
   gcc -E main.c -o main.i -Dabc 表示加了个条件，可以随时判断一个条件想不想要
   则可以预编译编译了
   ```

   这个可以来控制系统是否有宏才执行，或者是否需要通过条件编译--因此叫做条件编译

   ##### 条件编译     条件不成立 #if 0   #endif        #endif 1 #endif 条件成立

7. ##### 其他的主函数的的东西和之前c文件是一样的，完全一致的，直接拷贝过来



### 编译

```C
gcc -S main.i -o main.s
```

##### 1. 以.s为后缀生成的是汇编文件

##### 2. 会检查语法错误

##### 3. 将预处理文件编译成汇编文件

### 汇编

```C
gcc -c main.s -o main.o
```

##### 1. 汇编文件生成二进制文件.o

##### 2. 该二进制文件不能被直接运行-- 因为缺少必要的连接库

### 链接

```C
gcc main.o -o main
```

##### 1. 设置运行环境，堆栈等基本空间

##### 2. 链接其他的库

# 程序分析

```C
#include <stdio.h>
int main(){
    printf("hello.h\n");
    return 0;
}
```

##### 1.# 预处理指令，在预编译的的时候会被执行

* ##### #include <stdio.h> 文件：包含头文件。头文件会包含一些函数和变量的基本定义

##### 2. 两个斜杠 // 单行注释   是可以直接加到语句后面的，/**/多行注释

##### 3. 符号与括号结合，代表这是个函数    例如 main（）

* ##### main() 函数：也叫做主函数：整个程序中必须包含一个，并且只能包含一个main函数。程序一定是从main函数开始执行的

  * ##### 一个程序要执行的时候，它先要去找main函数，有了main函数，它才能开始执行，没有main，直接报错

  * ##### 不能有多个main，只能由一个main

##### 4. int main() 代表main函数结束后的返回值类型。结束后main函数程序返回值会返回到寄存器里面。

* ##### 在C语言中我们可以不写，写void int都是可以的，但是在C++中，必须是int

##### 5. return 结束一个函数，并返回值。返回值的返回类型和定义的类型必须一致

##### 6. {} 大括号里面是函数体：所有要执行的代码必须写在函数体中，如果有的语句不在任何一个函数体中，它一定会报错，他至少要在一个函数体中

##### 7. 每一条代码必须以分号结尾；



# System C库函数

##### 任务：在程序中启动另一个程序   库函数位于<stdlib.h>

```C
system("");
```







